<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paltech Hub AI</title>
    <style>
        /* Base styles for body */
        html[data-theme='white'] body {
            background-color: #ffffff; /* bg-white */
            color: #1f2937; /* text-gray-800 */
        }
        /* Dark mode styles applied via data-theme="dark" on html */
        html[data-theme='dark'] body {
            background-color: #111827; /* bg-gray-900 */
            color: #e5e7eb; /* text-gray-200 */
        }

        /* Apply Cairo font when language is Arabic (dir="rtl") */
        html[dir='rtl'] body {
            font-family: 'Cairo', sans-serif;
        }

        /* Custom scrollbar for webkit browsers - Light Mode */
        html[data-theme='white'] ::-webkit-scrollbar {
            width: 8px;
        }
        html[data-theme='white'] ::-webkit-scrollbar-track {
            background: #f3f4f6; /* bg-gray-100 */
        }
        html[data-theme='white'] ::-webkit-scrollbar-thumb {
            background: #d1d5db; /* bg-gray-300 */
            border-radius: 4px;
        }
        html[data-theme='white'] ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af; /* bg-gray-400 */
        }

        /* Custom scrollbar for webkit browsers - Dark Mode */
        html[data-theme='dark'] ::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        html[data-theme='dark'] ::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 4px;
        }
        html[data-theme='dark'] ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }

        /* Custom styling for range input */
        html[data-theme='white'] input[type=range] {
            background: #e5e7eb; /* bg-gray-200 */
        }
        html[data-theme='dark'] input[type=range] {
            background: #374151; /* bg-gray-700 */
        }
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 4px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type=range]:hover {
            opacity: 1;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3c32c8; /* main accent color */
            cursor: pointer;
            border-radius: 50%;
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3c32c8; /* main accent color */
            cursor: pointer;
            border-radius: 50%;
        }

        /* Custom styling for radio buttons */
        .image-size-radio {
            display: none;
        }
        html[data-theme='white'] .image-size-label {
            border: 2px solid #d1d5db; /* bg-gray-300 */
            background-color: #ffffff; /* bg-white */
            color: #1f2937; /* text-gray-800 */
        }
        html[data-theme='white'] .image-size-radio:checked + .image-size-label {
            background-color: #e0e7ff; /* light blue tint */
        }
        html[data-theme='white'] .image-size-label:hover {
            background-color: #e5e7eb; /* bg-gray-200 */
        }

        html[data-theme='dark'] .image-size-label {
            border-color: #374151; /* bg-gray-700 */
            background-color: #111827; /* bg-gray-900 */
            color: #e5e7eb; /* text-gray-200 */
        }
        html[data-theme='dark'] .image-size-radio:checked + .image-size-label {
            background-color: #1f2937; /* bg-gray-800 */
        }
        html[data-theme='dark'] .image-size-label:hover {
            background-color: #374151; /* bg-gray-700 */
        }

        .image-size-label {
            padding: 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 0.25rem;
            height: 80px; /* Fixed height */
        }
        
        html[data-theme='white'] .icon-shape {
            background-color: #9ca3af; /* gray-400 */
            border: 1px solid rgba(0, 0, 0, 0.1); /* Subtle border for light theme */
        }
        html[data-theme='dark'] .icon-shape {
            background-color: #4b5563; /* gray-600 */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border for dark theme */
        }
        .icon-shape {
            border-radius: 2px;
        }

        #display-prompt-uploaded-image {
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            min-height: 150px;
        }

        html[data-theme='white'] #display-prompt-uploaded-image{
            background-color: #f9fafb; /* bg-gray-50 */
            border-color: #d1d5db; /* border-gray-300 */
        }
        html[data-theme='dark'] #display-prompt-uploaded-image{
            background-color: #1f2937; /* bg-gray-800/50 */
            border-color: #374151; /* border-gray-700 */
        }

        /* Specific styles for display-uploaded-image */
        html[data-theme='white'] #display-uploaded-image{
            background-color: #f9fafb; /* bg-gray-50 */
            border-color: #d1d5db; /* border-gray-300 */
        }
        html[data-theme='dark'] #display-uploaded-image{
            background-color: #1f2937; /* bg-gray-800/50 */
            border-color: #374151; /* border-gray-700 */
        }


        .history-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            border-bottom: 1px solid #e5e7eb; /* gray-200 */
            background-color: #f9fafb; /* gray-50 */
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }

        html[data-theme='dark'] .history-item {
            border-bottom: 1px solid #374151; /* gray-700 */
            background-color: #1f2937; /* gray-800 */
        }

        .history-item img {
            width: 64px;
            height: 64px;
            object-fit: cover;
            border-radius: 0.25rem;
            flex-shrink: 0;
        }

        .history-item-prompt {
            flex-grow: 1;
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* gray-600 */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            cursor: copy; /* Indicate it's clickable and copies */
        }

        html[data-theme='dark'] .history-item-prompt {
            color: #9ca3af; /* gray-400 */
        }

        /* Notification Bar Styles */
        #notification-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #10b981; /* Emerald Green - bg-emerald-500 */
            color: white;
            text-align: center;
            padding: 0.75rem;
            z-index: 1000;
            transform: translateY(-100%); /* Start off-screen */
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #notification-bar.show {
            transform: translateY(0); /* Slide in */
            opacity: 1;
        }

        /* Force LTR for the prompt input */
        #prompt-input {
            direction: ltr;
        }

        /* Custom styles for header */
        html[data-theme='white'] header {
            background-color: #ffffff; /* bg-white (changed from #F8F8F8) */
            color: #1f2937; /* text-gray-800 */
            border-bottom: 1px solid #d1d5db; /* A bit darker border for separation */
        }
        html[data-theme='dark'] header {
            background-color: #111827; /* bg-gray-900 */
            color: #e5e7eb; /* text-gray-200 */
            border-bottom: 1px solid #374151; /* Darker border for dark theme */
        }
        html[data-theme='white'] header .text-xs {
            color: #1f2937; /* Ensure version text is dark gray */
        }
        html[data-theme='white'] header #theme-toggle,
        html[data-theme='white'] header #language-select,
        html[data-theme='white'] header #back-button { /* Added back-button */
            background-color: #e5e7eb; /* bg-gray-200 */
            color: #1f2937; /* text-gray-800 */
            border-color: #d1d5db; /* border-gray-300 */
        }
        html[data-theme='white'] header #theme-toggle:hover,
        html[data-theme='white'] header #language-select:hover,
        html[data-theme='white'] header #back-button:hover { /* Added back-button */
            background-color: #d1d5db; /* hover bg-gray-300 */
        }
        /* Specific styles for header buttons in dark mode */
        html[data-theme='dark'] header #theme-toggle,
        html[data-theme='dark'] header #language-select,
        html[data-theme='dark'] header #back-button { /* Added back-button */
            background-color: #374151; /* Darker gray for buttons in dark mode */
            color: #e5e7eb; /* Light text for buttons in dark mode */
            border-color: #4b5563; /* Darker border for buttons in dark mode */
        }
        html[data-theme='dark'] header #theme-toggle:hover,
        html[data-theme='dark'] header #language-select:hover,
        html[data-theme='dark'] header #back-button:hover { /* Added back-button */
            background-color: #4b5563; /* Even darker gray on hover in dark mode */
        }


        /* Custom styles for aside and main */
        html[data-theme='white'] aside {
            background-color: #ffffff; /* bg-white */
            border-right: 1px solid #d1d5db; /* Darker border for column separation */
        }
        html[data-theme='dark'] aside {
            background-color: #111827; /* bg-gray-900 */
            border-right: 1px solid #374151; /* Darker border for dark theme */
        }

        /* Differentiate main content area in white theme */
        html[data-theme='white'] main {
            background-color: #f9fafb; /* bg-gray-50 */
        }
        html[data-theme='dark'] main {
            background-color: #1f2937; /* bg-gray-800 */
        }

        /* Differentiate guide-container in white theme (matches main) */
        html[data-theme='white'] #guide-container {
            background-color: #f9fafb; /* bg-gray-50 */
        }
        html[data-theme='dark'] #guide-container {
            background-color: #1f2937; /* bg-gray-800 */
        }

        /* Custom styles for sticky button container */
        html[data-theme='white'] .sticky-bottom-buttons {
            background-color: #ffffff; /* bg-white */
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
        }
        html[data-theme='dark'] .sticky-bottom-buttons {
            background-color: #111827; /* bg-gray-900 */
            border-top: 1px solid #374151; /* border-gray-700 */
        }
        
        html[data-theme='white'] details .pl-4.pt-4.border-l-2 {
            border-left-color: #9CA3AF; /* Darker gray for accordion left borders */
        }

        /* Custom styles for footer */
        html[data-theme='white'] footer {
            background-color: #ffffff; /* bg-white */
            color: #1f2937; /* text-gray-800 */
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
        }
        html[data-theme='dark'] footer {
            background-color: #111827; /* bg-gray-900 */
            color: #e5e7eb; /* text-gray-200 */
            border-top: 1px solid #374151; /* border-gray-700 */
        }

        /* Text color adjustments for various elements */
        html[data-theme='white'] .text-gray-900 { color: #1f2937; } /* Ensure dark text for headings etc. in light mode */
        html[data-theme='dark'] .text-gray-900 { color: #e5e7eb; } /* Ensure light text for headings etc. in dark mode */

        html[data-theme='white'] .text-gray-700 { color: #374151; } /* General text in light mode */
        html[data-theme='dark'] .text-gray-700 { color: #9ca3af; } /* General text in dark mode */

        html[data-theme='white'] .text-gray-600 { color: #4b5563; } /* Labels, weaker text in light mode */
        html[data-theme='dark'] .text-gray-600 { color: #9ca3af; } /* Labels, weaker text in dark mode */

        html[data-theme='white'] .text-gray-500 { color: #6b7280; } /* Placeholders, very weak text in light mode */
        html[data-theme='dark'] .text-gray-500 { color: #6b7280; } /* Placeholders, very weak text in dark mode */

        html[data-theme='white'] .text-gray-800 { color: #1f2937; } /* Input text, etc. in light mode */
        html[data-theme='dark'] .text-gray-800 { color: #e5e7eb; } /* Input text, etc. in dark mode */

        /* Specific overrides for strong tags within guide */
        html[data-theme='white'] #guide-container strong {
            color: #1f2937; /* Dark text for strong in light mode */
        }
        html[data-theme='dark'] #guide-container strong {
            color: #e5e7eb; /* Light text for strong in dark mode */
        }

        /* Specific styles for inputs and textareas */
        html[data-theme='white'] input[type="text"],
        html[data-theme='white'] input[type="number"],
        html[data-theme='white'] textarea,
        html[data-theme='white'] select { /* Added select */
            background-color: #f9fafb; /* bg-gray-50 */
            color: #1f2937; /* text-gray-800 */
            border-color: #d1d5db; /* border-gray-300 */
        }

        html[data-theme='dark'] input[type="text"],
        html[data-theme='dark'] input[type="number"],
        html[data-theme='dark'] textarea,
        html[data-theme='dark'] select { /* Added select */
            background-color: #1f2937; /* bg-gray-800 */
            color: #e5e7eb; /* text-gray-200 */
            border-color: #374151; /* border-gray-700 */
        }

        /* Specific styles for modal close button */
        html[data-theme='white'] #modal-close-button {
            background-color: #d1d5db; /* bg-gray-300 */
            color: #1f2937; /* text-gray-800 */
        }
        html[data-theme='white'] #modal-close-button:hover {
            background-color: #9ca3af; /* hover:bg-gray-400 */
        }

        html[data-theme='dark'] #modal-close-button {
            background-color: #4b5563; /* bg-gray-600 */
            color: #e5e7eb; /* text-gray-200 */
        }
        html[data-theme='dark'] #modal-close-button:hover {
            background-color: #6b7280; /* hover:bg-gray-500 */
        }

        /* Specific styles for "Select Image" button (label for input type file) */
        html[data-theme='white'] label[for$="-image-input"],
         html[data-theme='white'] label[for="image-input"] {
            background-color: #d1d5db; /* bg-gray-300 */
            color: #1f2937; /* text-gray-800 */
        }
        html[data-theme='white'] label[for="image-input"]:hover,
        html[data-theme='white'] label[for$="-image-input"]:hover {
            background-color: #9ca3af; /* hover:bg-gray-400 */
        }
        html[data-theme='dark'] label[for="image-input"],
        html[data-theme='dark'] label[for$="-image-input"] {
            background-color: #4b5563; /* bg-gray-700 */
            color: #e5e7eb; /* text-gray-200 */
        }
        html[data-theme='dark'] label[for$="-image-input"]:hover,
        html[data-theme='dark'] label[for="image-input"]:hover {
            background-color: #6b7280; /* hover:bg-gray-600 */
        }

        /* Specific styles for the random seed checkbox */
        #is-random {
            -webkit-appearance: checkbox; /* Ensure standard checkbox appearance */
            appearance: checkbox; /* Ensure standard checkbox appearance */
            height: 16px; /* Standard size */
            width: 16px; /* Standard size */
            border-radius: 3px; /* Slightly rounded corners */
            border: 1px solid; /* Add a border */
            cursor: pointer;
            vertical-align: middle; /* Align with text */
            margin-right: 0.25rem; /* Small margin to separate from text */
            accent-color: #3c32c8; /* This sets the color when checked */
        }

        html[data-theme='white'] #is-random {
            border-color: #9ca3af; /* Gray border for unchecked in light mode */
            background-color: #ffffff; /* White background for unchecked in light mode */
        }
        html[data-theme='dark'] #is-random {
            border-color: #6b7280; /* Darker gray border for unchecked in dark mode */
            background-color: #1f2937; /* Dark background for unchecked in dark mode */
        }
        
        /* START: Custom Dropdown Styles */
        html[data-theme='white'] #custom-pose-select-button {
             background-color: #f9fafb;
             border-color: #d1d5db;
             color: #1f2937;
        }
         html[data-theme='dark'] #custom-pose-select-button {
             background-color: #1f2937;
             border-color: #374151;
             color: #e5e7eb;
        }
        html[data-theme='white'] #custom-pose-select-options {
            background-color: #ffffff;
            border-color: #d1d5db;
        }
        html[data-theme='dark'] #custom-pose-select-options {
            background-color: #1f2937;
            border-color: #4b5563;
        }
        .custom-pose-option {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            cursor: pointer;
            gap: 0.75rem;
        }
        html[data-theme='white'] .custom-pose-option:hover {
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        html[data-theme='dark'] .custom-pose-option:hover {
            background-color: #374151; /* bg-gray-700 */
        }
        .custom-pose-option img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 4px;
            flex-shrink: 0;
        }
        /* END: Custom Dropdown Styles */

        /* START: Poses Modal Styles */
        html[data-theme='white'] #poses-modal {
            background-color: rgba(0, 0, 0, 0.5);
        }
        html[data-theme='dark'] #poses-modal {
            background-color: rgba(0, 0, 0, 0.7);
        }
        html[data-theme='white'] #poses-modal .bg-white {
            background-color: #ffffff;
        }
        html[data-theme='dark'] #poses-modal .dark\:bg-gray-800 {
            background-color: #1f2937; /* bg-gray-800 */
        }
        html[data-theme='white'] #poses-modal-list {
            background-color: #f9fafb; /* bg-gray-50 */
        }
        html[data-theme='dark'] #poses-modal-list {
            background-color: #111827; /* bg-gray-900 */
        }
        html[data-theme='white'] .pose-card {
            background-color: #ffffff;
            border-color: #e5e7eb; /* border-gray-200 */
        }
        html[data-theme='dark'] .pose-card {
            background-color: #1f2937; /* bg-gray-800 */
            border-color: #374151; /* border-gray-700 */
        }
        html[data-theme='white'] .pose-card h3 {
            color: #1f2937; /* text-gray-800 */
        }
        html[data-theme='dark'] .pose-card h3 {
            color: #e5e7eb; /* text-gray-200 */
        }
        html[data-theme='white'] .pose-card p {
            color: #4b5563; /* text-gray-600 */
        }
        html[data-theme='dark'] .pose-card p {
            color: #9ca3af; /* text-gray-400 */
        }
        html[data-theme='white'] #poses-modal-close-button {
            color: #1f2937;
        }
        html[data-theme='dark'] #poses-modal-close-button {
            color: #e5e7eb;
        }
        html[data-theme='white'] #poses-modal-close-button:hover {
            background-color: #e5e7eb;
        }
        html[data-theme='dark'] #poses-modal-close-button:hover {
            background-color: #374151;
        }
        /* END: Poses Modal Styles */

        .modal-open {
            overflow: hidden;
        }

        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        .tooltip-icon {
            cursor: pointer;
        }

        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        html[data-theme='dark'] .tooltip-text {
            background-color: #f3f4f6;
            color: #1f2937;
        }


        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        html[data-theme='dark'] .tooltip-text::after {
             border-color: #f3f4f6 transparent transparent transparent;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .view-content {
            /* Ensure views take full width and can scroll if needed */
            width: 100%;
        }
        /* --- ADD: Fade Animation for Views --- */
        .view-content {
            opacity: 1;
            transition: opacity 0.3s ease-in-out;
        }
        .view-content.hidden {
            opacity: 0;
            /* Keep display: none to truly hide, or use visibility: hidden if you want to maintain space */
            /* display: none; */ /* Uncomment if you prefer display none */
        }
        /* --- END: Fade Animation --- */

        /* Style the tab button when it's active */
        /* Light mode active tab */
        html[data-theme='white'] .tab-button-link.bg-gray-100 { /* Target the link with the active bg class */
            background-color: #f3f4f6; /* bg-gray-100 - Light gray background */
            color: #2563eb; /* text-blue-600 - Blue text */
        }

        /* Dark mode active tab link */
        html[data-theme='dark'] .tab-button-link.dark\:bg-gray-800.dark\:text-blue-500 { /* Target the link with the active dark bg and text classes */
            background-color: #1f2937; /* dark:bg-gray-800 - Dark background */
            color: #3b82f6; /* dark:text-blue-500 - Light blue text */
        }
        /* --- END: Styles for active tab --- */


        html[data-theme='white'] #prompt-history-section {
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        html[data-theme='dark'] #prompt-history-section {
            background-color: #374151; /* bg-gray-700 */
        }

        html[data-theme='white'] .prompt-history-item {
            background-color: #ffffff; /* bg-white */
        }
        html[data-theme='dark'] .prompt-history-item {
            background-color: #1f2937; /* bg-gray-800 */
        }

        /* Ensure text colors are correct */
        html[data-theme='white'] .prompt-history-item-prompt {
            color: #4b5563; /* text-gray-600 */
        }
        html[data-theme='dark'] .prompt-history-item-prompt {
            color: #d1d5db; /* text-gray-300 - or #9ca3af if that's preferred */
        }

        /* Ensure placeholder text is correct */
        html[data-theme='white'] #prompt-result-placeholder,
        html[data-theme='white'] #prompt-history-empty-message {
            color: #9ca3af; /* text-gray-400 */
        }
        html[data-theme='dark'] #prompt-result-placeholder,
        html[data-theme='dark'] #prompt-history-empty-message {
            color: #9ca3af; /* text-gray-400 */
        }
        html[data-theme='white'] #prompt-result-container {
            background-color: #f9fafb; /* bg-gray-50 - Very light gray */
        }
        html[data-theme='dark'] #prompt-result-container {
            background-color: #374151; /* bg-gray-700 - Dark gray */
        }
        html[data-theme='white'] .sticky.bottom-4.bg-white.dark\:bg-gray-800 {
            background-color: #ffffff; /* bg-white */
        }
        html[data-theme='dark'] .sticky.bottom-4.bg-white.dark\:bg-gray-800 {
            background-color: #1f2937; /* bg-gray-800 */
        }
        #display-uploaded-image {
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            min-height: 150px;
        } 
     </style>
        <link rel="stylesheet" type="text/css" href="./css/image-ai.css">
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="font-inter transition-colors duration-300 flex flex-col">

    <header class="flex-shrink-0 shadow-md p-4 flex flex-col transition-colors duration-300 h-24">
        <div class="flex justify-between items-center w-full mb-2">
            <h1 class="text-3xl font-bold text-[#3c32c8] flex items-center" dir="ltr">
                <img src="./sources/artboard-19-copy-4.webp" alt="Paltech Hub Logo" class="h-10 inline-block mr-2 align-middle" onerror="this.onerror=null;this.src='https://placehold.co/100x32/cccccc/333333?text=Paltech+Logo';"> AI
            </h1>
            <div id="right-controls" class="flex items-center gap-4" dir="ltr">
                <button id="back-button" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                </button>
                <button id="theme-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300 cursor-pointer">
                    <span id="theme-icon" class="text-xl">ðŸ’¡</span>
                </button>
                <select id="language-select" class="p-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-600">
                    <option value="en">English</option>
                    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                </select>
            </div>
        </div>

        <div class="w-full bg-gray-300 dark:bg-gray-700 h-1">
            <div id="main-progress" class="bg-[#3c32c8] h-1 transition-all duration-300" style="width: 0%"></div>
        </div>
        <div id="current-node-status" class="text-center text-xs text-gray-600 dark:text-gray-400 py-1"></div>
    </header>

     <!-- *** ADD: Tab Navigation *** -->
    <div class="w-full max-w-7xl mx-auto px-4 sm:px-6">
        <ul class="flex flex-wrap text-md font-medium text-center text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400" role="tablist">
            <li class="me-2" role="presentation">
                <!-- Profile/Image Generation Tab -->
                <a href="#"
                    id="tab-image-generation-link"
                    class="tab-button-link inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300"
                    data-tab="image-generation"
                    role="tab"
                    aria-controls="image-generation-view"
                    aria-selected="true"> <!-- aria-selected managed by JS -->
                    <svg class="inline w-4 h-4 me-2 text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <span data-lang-key="tab_image_generation">Image Generation</span>
                </a>
            </li>
            <li class="me-2" role="presentation">
                <!-- Dashboard/Prompt Generation Tab -->
                <a href="#"
                    id="tab-prompt-generation-link"
                    class="tab-button-link inline-block p-4 rounded-t-lg hover:text-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300"
                    data-tab="prompt-generation"
                    role="tab"
                    aria-controls="prompt-generation-view"
                    aria-selected="false"> <!-- aria-selected managed by JS -->
                    <svg class="inline w-4 h-4 me-2 text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span data-lang-key="tab_prompt_generation">Prompt Generation</span>
                </a>
            </li>
            <!-- Add more tabs here if needed in the future, following the same pattern -->
            <!-- Example Disabled Tab (optional) -->
            <!--
            <li role="presentation">
                <a class="inline-block p-4 text-gray-400 rounded-t-lg cursor-not-allowed dark:text-gray-500">
                    <svg class="inline w-4 h-4 me-2 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path>
                    </svg>
                    Disabled
                </a>
            </li>
            -->
        </ul>
    </div>
    <!-- *** END: Tab Navigation *** -->

    <div id="notification-bar" class="text-sm"></div>

    <div class="flex flex-col md:flex-row flex-1 md:overflow-y-auto">
        <!-- ***  Main Content Area with Views *** -->
        <div id="main-content-views" class="flex-1 w-full max-w-7xl mx-auto">
            <!-- Image Generation View -->
            <div id="image-generation-view" class="view-content w-full">
                <!-- *** EXISTING MAIN GRID CONTENT GOES HERE *** -->
                <div id="prompt-generator-main-content" class="flex flex-col md:flex-row flex-1 md:overflow-y-auto w-full max-w-7xl mx-auto p-4 sm:p-6">
                    <aside class="w-full md:w-1/3 p-6 transition-colors duration-300 flex flex-col min-h-0 md:max-h=full">
                        <div class="space-y-6 flex-grow pb-20">
                            <details class="space-y-4" open>
                                <summary class="text-lg font-semibold cursor-pointer list-none text-gray-900 dark:text-white" data-lang-key="generation_params_title">Generation Params</summary>
                                <div class="pl-4 pt-4 border-l-2 border-gray-300 dark:border-gray-700 space-y-6">
                                    <div class="flex items-center gap-4">
                                        <label for="main-seed" class="block text-sm font-medium text-gray-600 dark:text-gray-400" data-lang-key="seed_label">Seed</label>
                                        <input id="main-seed" class="rounded-md w-32 px-2 py-1 text-center" type="text" data-lang-key="seed_placeholder" placeholder="Seed" value="0">
                                        <label class="flex items-center gap-2 cursor-pointer text-gray-800 dark:text-gray-200">
                                            <input id="is-random" type="checkbox" checked>
                                            <span data-lang-key="random_checkbox">Random</span>
                                        </label>
                                    </div>
                                    <div>
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center gap-2">
                                            <label for="guidance-scale-input" class="block text-sm font-medium text-gray-600 dark:text-gray-400" data-lang-key="guidance_scale_label">Guidance Scale</label>
                                            <div class="tooltip-container">
                                                <span class="tooltip-icon text-gray-400 dark:text-gray-500">â“˜</span>
                                                <span class="tooltip-text text-xs" data-lang-key="guidance_scale_tooltip">Higher values result in images that more closely match the prompt but may lack some creativity. Lower values result in images that are less closely matched to the prompt but may be more creative.</span>
                                            </div>
                                        </div>
                                        <span id="guidance-scale-value" class="text-sm font-semibold text-gray-800 dark:text-gray-200">3.5</span>
                                    </div>
                                    <input id="guidance-scale-input" type="range" min="1" max="100" value="3.5" step="0.5">
                                    </div>
                                    <div>
                                        <label for="batch-size-input" class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2" data-lang-key="images_to_generate_label">Images to generate</label>
                                        <input id="batch-size-input" type="range" min="1" max="4" value="1" step="1">
                                        <div class="flex justify-between text-xs text-gray-500 dark:text-gray-500 mt-1">
                                            <span>1</span>
                                            <span>2</span>
                                            <span>3</span>
                                            <span>4</span>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-600 dark:text-gray-400 mb-2" data-lang-key="image_size_label">Image Size</label>
                                        <div id="image-dimension-presets" class="grid grid-cols-3 gap-2">
                                            <div>
                                                <input type="radio" name="image-size" id="size-square" value="square" class="image-size-radio" checked>
                                                <label for="size-square" class="image-size-label text-xs">
                                                    <div class="w-6 h-6 icon-shape"></div>
                                                    <span data-lang-key="size_square">Square</span>
                                                </label>
                                            </div>
                                            <div>
                                                <input type="radio" name="image-size" id="size-portrait" value="portrait" class="image-size-radio">
                                                <label for="size-portrait" class="image-size-label text-xs">
                                                    <div class="w-5 h-7 icon-shape"></div>
                                                    <span data-lang-key="size_portrait">Portrait</span>
                                                </label>
                                            </div>
                                            <div>
                                                <input type="radio" name="image-size" id="size-landscape" value="landscape" class="image-size-radio">
                                                <label for="size-landscape" class="image-size-label text-xs">
                                                    <div class="w-7 h-5 icon-shape"></div>
                                                    <span data-lang-key="size_landscape">Landscape</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="mt-4 grid grid-cols-2 gap-4">
                                            <div>
                                                <label for="image-height" class="block text-xs font-medium text-gray-500 dark:text-gray-400" data-lang-key="height_label">Height</label>
                                                <input id="image-height" type="number" value="1024" class="mt-1 block w-full rounded-md shadow-sm text-center">
                                            </div>
                                            <div>
                                                <label for="image-width" class="block text-xs font-medium text-gray-500 dark:text-gray-400" data-lang-key="width_label">Width</label>
                                                <input id="image-width" type="number" value="1024" class="mt-1 block w-full rounded-md shadow-sm text-center">
                                            </div>
                                        </div>
                                    </div>
                                </details>

                                <details class="space-y-4" open>
                                    <summary class="text-lg font-semibold cursor-pointer list-none text-gray-900 dark:text-white" data-lang-key="customized_prompt_title">Customized Prompt</summary>
                                    <div class="pl-4 pt-4 border-l-2 border-gray-300 dark:border-gray-700 space-y-4">
                                        <label class="flex items-center gap-3 cursor-pointer text-gray-800 dark:text-gray-200">
                                            <input id="enable-turkish-wow" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                            <span data-lang-key="enable_custom_poses">Enable Custom Poses</span>
                                        </label>
                                        <div id="turkish-wow-controls" class="space-y-4" style="display: none;">
                                            <label for="custom-pose-select-button" class="block text-sm font-medium text-gray-600 dark:text-gray-400" data-lang-key="pose_select_label">Select a Pose</label>
                                            <div id="custom-pose-select" class="relative">
                                                <button type="button" id="custom-pose-select-button" class="w-full p-2 rounded-md border flex items-center justify-between text-left">
                                                    <div id="selected-pose-container" class="flex items-center gap-3">
                                                        <img id="selected-pose-img" src="" alt="" class="w-10 h-10 object-cover rounded hidden">
                                                        <span id="selected-pose-text" data-lang-key="select_pose_placeholder">-- Select a Pose --</span>
                                                    </div>
                                                    <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                            </div>
                                            <input type="hidden" id="pose-select-value" name="pose-select-value">
                                        </div>
                                    </div>
                                </details>

                                <details class="space-y-4" open>
                                    <summary class="text-lg font-semibold cursor-pointer list-none text-gray-900 dark:text-white" data-lang-key="prompt_title">Prompt</summary>
                                    <div class="pl-4 pt-4 border-l-2 border-gray-300 dark:border-gray-700">
                                        <textarea id="prompt-input" rows="10" class="w-full rounded-md shadow-sm p-2" data-lang-key="prompt_placeholder" placeholder="Add prompt..."></textarea>
                                    </div>
                                </details>

                                <details class="space-y-4" open>
                                    <summary class="text-lg font-semibold cursor-pointer list-none text-gray-900 dark:text-white" data-lang-key="image_upload_title">Image To Upload</summary>
                                    <div class="pl-4 pt-4 border-l-2 border-gray-300 dark:border-gray-700 space-y-4">
                                        <div class="flex justify-center">
                                            <label for="image-input" class="cursor-pointer font-semibold py-2 px-4 rounded-md" data-lang-key="select_image_button">
                                                Select Image
                                            </label>
                                            <input type="file" id="image-input" class="hidden" accept="image/png, image/jpeg, image/webp">
                                        </div>
                                        <div id="display-uploaded-image" class="mt-4 w-full h-48 rounded-md border border-gray-300 dark:border-gray-700 bg-gray-200 dark:bg-gray-700 flex items-center justify-center">
                                            <div id="upload-image-spinner" class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-70 dark:bg-gray-900 dark:bg-opacity-70 hidden z-10">
                                                <div class="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                                            </div>
                                            <span class="text-gray-500 dark:text-gray-400" data-lang-key="image_preview_placeholder">Image Preview</span>
                                        </div>
                                    </div>
                                </details>

                                <details class="space-y-4" open>
                                    <summary class="text-lg font-semibold cursor-pointer list-none text-gray-900 dark:text-white" data-lang-key="history_title">History</summary>
                                    <div class="pl-4 pt-4 border-l-2 border-gray-300 dark:border-gray-700 space-y-4">
                                        <div id="history-container" class="max-h-64 overflow-y-auto">
                                            <p class="text-gray-500 dark:text-gray-400 text-sm" data-lang-key="history_empty_message">No history yet.</p>
                                        </div>
                                        <button id="clear-history-button" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md transition-colors duration-300 cursor-pointer" data-lang-key="clear_history_button">
                                            Clear History
                                        </button>
                                    </div>
                                </details>
                        </div>
                        <div class="sticky bottom-0 w-full p-4 shadow-lg z-10 flex flex-col gap-4 sticky-bottom-buttons">
                            <button id="generate" class="bg-[#3c32c8] hover:bg-[#2a2491] text-white font-bold py-3 px-6 rounded-md flex items-center justify-center gap-2 transition-colors w-full cursor-pointer">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                <span data-lang-key="generate_button">Generate</span>
                            </button>
                            <button id="interrupt" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-md flex items-center justify-center gap-2 transition-colors w-full cursor-pointer" style="display: none;">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                                <span data-lang-key="interrupt_button">Interrupt</span>
                            </button>
                        </div>
                    </aside>

                    <main class="flex-1 md:w-2/3 flex flex-col min-h-0 transition-colors duration-300 p-8">
                        <div id="guide-container" class="max-w-4xl mx-auto p-8 rounded-lg shadow-md dark:shadow-xl">
                            <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="guide_title">How to Generate Your AI Images</h2>
                            <p class="text-gray-700 dark:text-gray-400 mb-6" data-lang-key="guide_intro">Welcome to Paltech Hub AI! Follow these steps to generate your unique images. This tool leverages the Flux Kontext Dev model, which intelligently integrates your provided image into new scenes and backgrounds based on your creative prompts.</p>
                            
                            <h3 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4 border-b-2 border-[#3c32c8] pb-2" data-lang-key="guide_steps_title">Step-by-Step Guide:</h3>
                            
                            <ol class="list-decimal list-inside space-y-6 text-gray-700 dark:text-gray-300">
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step1_title">Set Quantity (Images to Generate)</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step1_desc">Navigate to the "Generation params" section on the left. Use the <strong>"Images to generate" slider</strong> to select how many variations of your image you would like to create. You can typically choose between 1 and 4 images.</p>
                                </li>
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step2_title">Define Image Dimensions (Image Size)</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step2_desc">In the "Image Size" subsection, choose your preferred aspect ratio and dimensions: Square, Portrait, or Landscape. The "Height" and "Width" fields will automatically update to reflect your selection.</p>
                                </li>
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step3_title">Craft Your Prompt</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step3_desc">Proceed to the "Prompt" section. In the text box labeled <strong>"Add prompt,"</strong> describe in detail what you envision for your generated image. This prompt will guide the AI in transforming or re-contextualizing your input image. Be descriptive and imaginative!</p>
                                </li>
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step4_title">Upload Your Input Image</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step4_desc">Locate the image upload area. Click to select an image from your device. This image will serve as the <strong>core visual element</strong> that the AI will integrate and transform according to your prompt. A preview of your uploaded image will appear, confirming your selection.</p>
                                </li>
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step5_title">Initiate Generation</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step5_desc">Once you have configured all settings and uploaded your image, click the <strong class="text-[#3c32c8]">âš¡ï¸ GENERATE</strong> button at the top of the main content area. The system will begin processing your request.</p>
                                </li>
                                <li>
                                    <strong class="font-semibold text-gray-900 dark:text-white" data-lang-key="step6_title">View Your Results</strong>
                                    <p class="pl-6 text-gray-700 dark:text-gray-400" data-lang-key="step6_desc">Your generated images will appear in this area once the generation process is complete.</p>
                                </li>
                            </ol>
                            <p class="mt-8 text-center text-gray-500 dark:text-gray-500" data-lang-key="guide_footer">We hope you enjoy creating with Paltech Hub AI!</p>
                        </div>

                        <div id="results" class="flex-1 p-8 hidden">
                            </div>
                    </main>
                </div>
            </div>

            <!-- Prompt Generation View (Initially Hidden) -->
            <div id="prompt-generation-view" class="view-content w-full hidden">
                <!-- *** PROMPT GENERATOR CONTENT WILL GO HERE *** -->
                <!-- We will inject the prompt generator HTML dynamically or inline it here -->
                <div class="p-4 sm:p-6">
                    <div class="text-center py-10">
                        <div id="prompt-generator-loading" class="text-center py-4 hidden">
                            <p class="text-lg text-gray-600 dark:text-gray-400" data-lang-key="prompt_generator_loading">Loading Prompt Generator...</p>
                        </div>
                        <!-- <p class="text-lg text-gray-600 dark:text-gray-400" data-lang-key="prompt_generator_loading">Loading Prompt Generator...</p> -->
                        <!-- Optional: Add a spinner -->
                        <div class="mt-4 flex justify-center">
                            <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#3c32c8]"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- *** END: Main Content Area with Views *** -->
    </div>

    <div id="app-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl max-w-sm w-full">
            <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-4" data-lang-key="modal_notification_title">Notification</h2>
            <p id="modal-message" class="text-gray-700 dark:text-gray-300"></p>
            <div class="text-right mt-6">
                <button id="modal-close-button" class="rounded" data-lang-key="modal_close_button">Close</button>
            </div>
        </div>
    </div>

    <!-- Poses Modal -->
    <div id="poses-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-[90vh] flex flex-col">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center flex-shrink-0">
                <h2 class="text-xl font-bold text-gray-900 dark:text-white" data-lang-key="pose_select_label">Select a Pose</h2>
                <button id="poses-modal-close-button" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="poses-modal-list" class="p-4 overflow-y-auto flex-grow">
                <!-- Poses will be dynamically inserted here -->
            </div>
        </div>
    </div>


    <footer class="flex-shrink-0 p-4 text-center shadow-md text-sm transition-colors duration-300">
        <p data-lang-key="footer_text"></p>
    </footer>

    <script src="./js/utils.js"></script>
    <script src="./js/image-ai.js"></script>
</body>
</html>